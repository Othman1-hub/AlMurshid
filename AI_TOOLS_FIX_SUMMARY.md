# ุชุตุญูุญ ูุดููุฉ ุฃุฏูุงุช ุงููุฑุดุฏ - ููุฎุต ุงูุชุญุฏูุซุงุช

## ุงููุดููุฉ
ุงููุฑุดุฏ ูุญุงูู ุฅูุดุงุก ููุงู ููู ููุดู ูุน ุฑุณุงุฆู:
- "ูุจุฏู ุฃู ููุงู ูุดููุฉ ูู ูุนุฑู ุงููุดุฑูุน"
- "ุงููุดุฑูุน ุบูุฑ ููุฌูุฏ ุฃู ูุง ููููู ุงููุตูู ุฅููู"

## ุงูุณุจุจ ุงูุฌุฐุฑู ุงููุญุชูู
**ูุดููุฉ ุงููุตุงุฏูุฉ ูู Edge Runtime**: ุฃุฏูุงุช AI ุชุนูู ูู ุณูุงู Edge Runtime API route ููุง ุชุณุชุทูุน ุงููุตูู ุฅูู ุฌูุณุฉ ุงููุณุชุฎุฏู ุจููุณ ุทุฑููุฉ Server Components.

## ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (`lib/ai/tools.ts`)
```typescript
// ุฅุถุงูุฉ ุชุญูู ูู ุตุญุฉ ูุนุฑู ุงููุดุฑูุน
if (!projectId || isNaN(projectId) || projectId <= 0) {
  return { 
    success: false, 
    error: 'ูุนุฑู ุงููุดุฑูุน ุบูุฑ ุตุญูุญ. ูุฌุจ ุฃู ูููู ูุนุฑู ุงููุดุฑูุน ุฑููุงู ููุฌุจุงู ุตุญูุญุงู.'
  };
}

// ุฑุณุงุฆู ุฎุทุฃ ุฃูุถุญ ุจุงูุนุฑุจูุฉ
if (result.error.includes('not authenticated')) {
  return { 
    success: false, 
    error: 'ูุดู ุงูุชุญูู ูู ุงููููุฉ. ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู.'
  };
}

if (result.error.includes('not found') || result.error.includes('unauthorized')) {
  return { 
    success: false, 
    error: `ุงููุดุฑูุน ุฑูู ${projectId} ุบูุฑ ููุฌูุฏ ุฃู ูุง ููููู ุงููุตูู ุฅููู. ุชุฃูุฏ ูู ูุนุฑู ุงููุดุฑูุน ุงูุตุญูุญ.`
  };
}
```

### 2. ุชูุถูุญ ูุนุฑู ุงููุดุฑูุน ูู ุงููุธุงู (`lib/ai/prompts.ts`)
```typescript
=== ุงูุฃุฏูุงุช ุงููุชุงุญุฉ (Available Tools) ===

**ููู ุฌุฏุงู**: ุงุณุชุฎุฏู ูุนุฑู ุงููุดุฑูุน (projectId) ุงููุชููุฑ ูู ุณูุงู ุงููุญุงุฏุซุฉ. 
ุณุชุฌุฏู ูู ูุนูููุงุช ุงููุดุฑูุน ุงูุญุงููุฉ ูู ุจุฏุงูุฉ ุงููุญุงุฏุซุฉ.
```

### 3. ุชุญุณูู ุนุฑุถ ุงูุณูุงู (`app/api/chat/route.ts`)
```typescript
const contextInfo = `
ูุนูููุงุช ุงููุดุฑูุน ุงูุญุงููุฉ:

๐ **ูุนุฑู ุงููุดุฑูุน (Project ID)**: ${projectId}
๐ **ุงุณู ุงููุดุฑูุน**: ${project?.name || 'ุบูุฑ ูุญุฏุฏ'}

โ๏ธ **ููู**: ุงุณุชุฎุฏู ูุนุฑู ุงููุดุฑูุน ${projectId} ูู ุฌููุน ุนูููุงุช ุงูุฃุฏูุงุช
```

## ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุงูุชุญูู ูู ูุนุฑู ุงููุดุฑูุน
1. ุงูุชุญ `/dashboard/[projectId]/ai`
2. ุชุญูู ูู ุงูุฑูู ูู URL (ูุซุงู: `/dashboard/5/ai` โ ุงููุนุฑู ูู 5)
3. ุงูุธุฑ ุฅูู ูุนูููุงุช ุงููุดุฑูุน ุฃุนูู ุงูุตูุญุฉ - ูุฌุจ ุฃู ุชุดุงูุฏ ุงูุฅุญุตุงุฆูุงุช

### ุงุฎุชุจุงุฑ 2: ุทูุจ ุจุณูุท (ุจุฏูู ุฃุฏูุงุช)
```
ุฃุนุทูู ููุฎุต ุนู ุญุงูุฉ ุงููุดุฑูุน
```
ูุฐุง ูุฌุจ ุฃู ูุนูู ูุฃูู ูุง ูุณุชุฎุฏู ุฃุฏูุงุช - ููุท ููุฑุฃ ุงูุณูุงู.

### ุงุฎุชุจุงุฑ 3: ุฅูุดุงุก ูููุฉ ุจุณูุทุฉ
```
ุฃุถู ูููุฉ ุจุณูุทุฉ:
- ุงูุงุณู: "ุงุฎุชุจุงุฑ ูุธุงู ุงูุฃุฏูุงุช"
- ุงูุตุนูุจุฉ: easy
- XP: 20
- ุงูููุช: 1 ุณุงุนุฉ
```

## ุงูุญููู ุงูุฅุถุงููุฉ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

### ุงูุญู A: ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู
1. ุณุฌู ุฎุฑูุฌ ูู ุงูุชุทุจูู
2. ุงูุณุญ cookies ุงููุชุตูุญ (F12 โ Application โ Cookies)
3. ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู

### ุงูุญู B: ุงูุชุญูู ูู Supabase Session
ุงูุชุญ Developer Console ูุฃุฏุฎู:
```javascript
// ูู ุตูุญุฉ ุงููุดุฑูุน
console.log('Project ID:', window.location.pathname.split('/')[2]);
```

### ุงูุญู C: ุงุณุชุฎุฏุงู API Routes ุจุฏูุงู ูู Server Actions
ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ูุน Edge Runtimeุ ูููููุง:
1. ุฅูุดุงุก API routes ูููุตูุฉ ููู ุฃุฏุงุฉ
2. ุงุณุชุฎุฏุงู Node.js runtime ุจุฏูุงู ูู Edge
3. ุชูุฑูุฑ authentication header ูุฏููุงู

## ุงููููุงุช ุงููุนุฏูุฉ
- โ `lib/ai/tools.ts` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ `lib/ai/prompts.ts` - ุชูุถูุญ ุงุณุชุฎุฏุงู ูุนุฑู ุงููุดุฑูุน
- โ `app/api/chat/route.ts` - ุชุญุณูู ุนุฑุถ ุงูุณูุงู
- โ `DEBUGGING_AI_TOOLS.md` - ุฏููู ุงูุชุตุญูุญ

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุฌุฑุจ ุงูุขู**: ุงูุชุญ ุตูุญุฉ AI ูุงุทูุจ ุฅูุดุงุก ูููุฉ ุจุณูุทุฉ
2. **ุฑุงูุจ ุงูุฃุฎุทุงุก**: ุฅุฐุง ุธูุฑ ุฎุทุฃุ ุดุงุฑูู ูุงููุงู (ุงููุต ุจุงูุนุฑุจู)
3. **ุชุญูู ูู Console**: ุงูุชุญ F12 ูุงูุธุฑ Network tab ู Console tab
4. **ูุนูููุงุช ุฅุถุงููุฉ**: ุดุงุฑู:
   - ูุนุฑู ุงููุดุฑูุน ูู URL
   - ุฑุณุงูุฉ ุงูุฎุทุฃ ูู ุงููุฑุดุฏ
   - ุฃู ุฃุฎุทุงุก ูู Developer Console

## ููุงุญุธุงุช ูููุฉ

### ููุงุฐุง ุชุญุฏุซ ูุฐู ุงููุดููุฉุ
- Server Actions ุชุญุชุงุฌ ุฅูู session cookies
- Edge Runtime ูุฏูู ูููุฏ ุนูู ุงููุตูู ุฅูู cookies
- ุงูุชุญูู ูู ุงููููุฉ ูุญุฏุซ ูู Server Actions (tasks.ts)

### ุงูุญู ุงูููุงุฆู ุงููุญุชูู
ูุฏ ูุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ููููุฉ ุงูุฃุฏูุงุช ูุชุนูู ูุน API routes ุนุงุฏูุฉ ุจุฏูุงู ูู Edge Runtimeุ ุฃู ุชูุฑูุฑ authentication token ุจุดูู ุตุฑูุญ.

---

**ุชู ุงูุชุญุฏูุซ**: ${new Date().toLocaleString('ar-SA')}
